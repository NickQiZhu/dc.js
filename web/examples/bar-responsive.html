<!DOCTYPE html>
<html lang="en">

<head>
  <title>dc.js - Bar Chart Example</title>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="../css/dc.css" />
</head>
<style>
.container {
  width: 400px;
  height: 400px;
}

.container.big-width {
  width: 800px;
}

.container.big-height {
  height: 600px;
}
</style>

<body>
  <a href="#" onclick="switchWidth()">switch width</a>
  <a href="#" onclick="switchHeight()">switch height</a>
  <div id="container" class="container">
    <div id="test"></div>
  </div>
  <script type="text/javascript" src="../js/d3.js"></script>
  <script type="text/javascript" src="../js/crossfilter.js"></script>
  <script type="text/javascript" src="../js/dc.js"></script>
  <script type="text/javascript">
  var chart = dc.barChart('#test');
  d3.csv('morley.csv', function(error, experiments) {

    experiments.forEach(function(x) {
      x.Speed = +x.Speed;
    });

    var ndx = crossfilter(experiments),
      runDimension = ndx.dimension(function(d) {
        return +d.Run;
      }),
      speedSumGroup = runDimension.group().reduceSum(function(d) {
        return d.Speed * d.Run / 1000;
      });

    chart
      // .width(700)
      // .height(700)
      .responsive(true)
      .x(d3.scale.linear().domain([6, 20]))
      .brushOn(false)
      .yAxisLabel('This is the Y Axis!')
      .dimension(runDimension)
      .group(speedSumGroup)
      .on('renderlet', function(chart) {
        chart.selectAll('rect').on('click', function(d) {
          console.log('click!', d);
        });
      });
    chart.render();
  });

  var isBigWidth = false,
    isBigHeight = false;

  function switchWidth() {
    var container = d3.select('#container');
    container.classed('big-width', function() {
      return isBigWidth = !isBigWidth;
    });
  }

  function switchHeight() {
    var container = d3.select('#container');
    container.classed('big-height', function() {
      return isBigHeight = !isBigHeight;
    });
  }
  </script>
</body>

</html>
